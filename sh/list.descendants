#!/usr/bin/bash

list.descendants () {
    local children; children=$(ps -o pid= --ppid "$1")

    for pid in $children; do
        list.descendants "$pid"
    done

    echo "$children"
}

list.descendants.comma_separated () {
    list.descendants "$1" | tr '\n' ',' | sed 's/,\+/,/g' | sed 's/\s\+//g' | sed 's/,$//'
}
