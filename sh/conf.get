#!/bin/bash
import errcho

# Use value passed on import line, or if not present, K2_ROOT_DIR from ENV

root_dir=

if [[ -n ${1:-} ]]; then
    root_dir="$1"
fi

conf.get () {
    if [[ -z $root_dir ]]; then
        [[ -z $K2_ROOT_DIR ]] && errxit "K2_ROOT_DIR not exported"
        root_dir="$K2_ROOT_DIR"
    fi

    # need to put K2_ROOT_DIR on the line to guarantee it's available in the start script
    K2_ROOT_DIR="$root_dir" "$root_dir/docker/d.start.k2.conf.get" "$1"
}
